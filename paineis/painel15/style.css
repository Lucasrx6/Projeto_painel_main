/* ========================================
   PAINEL 15 - GATILHO DE CHAMADOS TI
   Mobile-First / Otimizado para Celular e Tablet
   Hospital Anchieta Ceilandia
   ======================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --cor-primaria: #dc3545;
    --cor-primaria-dark: #c82333;
    --cor-primaria-light: #fde8ea;
    --cor-sucesso: #28a745;
    --cor-sucesso-dark: #1e7e34;
    --cor-sucesso-light: #e8f5e9;
    --cor-alerta: #ffc107;
    --cor-info: #17a2b8;
    --cor-laranja: #fd7e14;
    --cor-roxo: #6f42c1;
    --cor-fundo: #f0f2f5;
    --cor-card: #ffffff;
    --cor-texto: #333333;
    --cor-texto-sec: #666666;
    --cor-borda: #e0e0e0;
    --sombra: 0 2px 12px rgba(0, 0, 0, 0.08);
    --sombra-forte: 0 8px 30px rgba(0, 0, 0, 0.15);
    --radius: 12px;
    --header-height: 48px;
}

html {
    height: 100%;
    overflow: hidden;
}

body {
    background: var(--cor-fundo);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    height: 100%;
    height: 100dvh;
    overflow: hidden;
    position: fixed;
    width: 100%;
    top: 0;
    left: 0;
    color: var(--cor-texto);
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}

.painel-container {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ========================================
   CABECALHO COMPACTO
   ======================================== */

.painel-header {
    background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria-dark) 100%);
    color: white;
    padding: 8px 16px;
    flex-shrink: 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    z-index: 100;
    min-height: var(--header-height);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.header-left img {
    max-height: 28px;
    padding: 3px 5px;
    background: white;
    border-radius: 5px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.painel-header h1 {
    font-size: 1rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
}

.painel-header h1 i { font-size: 0.9rem; }

.btn-header {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.6);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-header:hover,
.btn-header:active {
    background: white;
    color: var(--cor-primaria);
}

/* ========================================
   CONTEUDO PRINCIPAL
   ======================================== */

.main-content {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.tela {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
}

.tela::-webkit-scrollbar { width: 4px; }
.tela::-webkit-scrollbar-thumb { background: var(--cor-borda); border-radius: 2px; }

/* ========================================
   TELA 1: BOTAO EMERGENCIAL
   ======================================== */

#tela-principal {
    justify-content: center;
    align-items: center;
    padding: 20px;
    gap: 24px;
    background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
}

.botao-emergencia-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.botao-emergencia {
    width: 240px;
    height: 240px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(145deg, #ff4757 0%, #dc3545 50%, #c82333 100%);
    color: white;
    cursor: pointer;
    position: relative;
    overflow: visible;
    box-shadow:
        0 8px 30px rgba(220, 53, 69, 0.4),
        0 0 0 6px rgba(220, 53, 69, 0.15),
        inset 0 -4px 10px rgba(0, 0, 0, 0.15),
        inset 0 4px 10px rgba(255, 255, 255, 0.15);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    -webkit-tap-highlight-color: transparent;
    z-index: 1;
}

.botao-emergencia:hover {
    transform: scale(1.03);
    box-shadow:
        0 12px 40px rgba(220, 53, 69, 0.5),
        0 0 0 8px rgba(220, 53, 69, 0.2),
        inset 0 -4px 10px rgba(0, 0, 0, 0.15),
        inset 0 4px 10px rgba(255, 255, 255, 0.15);
}

.botao-emergencia:active {
    transform: scale(0.95);
    box-shadow:
        0 4px 15px rgba(220, 53, 69, 0.4),
        0 0 0 4px rgba(220, 53, 69, 0.15),
        inset 0 4px 10px rgba(0, 0, 0, 0.2);
}

.botao-emergencia-pulso {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    border: 3px solid var(--cor-primaria);
    animation: pulsoExpandir 2s ease-out infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes pulsoExpandir {
    0% { width: 100%; height: 100%; opacity: 0.6; }
    100% { width: 140%; height: 140%; opacity: 0; }
}

.botao-emergencia-conteudo {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    position: relative;
    z-index: 2;
}

.botao-emergencia-conteudo i {
    font-size: 3rem;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    animation: tremor 2.5s ease-in-out infinite;
}

@keyframes tremor {
    0%, 100% { transform: rotate(0deg); }
    10% { transform: rotate(-5deg); }
    20% { transform: rotate(5deg); }
    30% { transform: rotate(-3deg); }
    40% { transform: rotate(3deg); }
    50%, 100% { transform: rotate(0deg); }
}

.botao-emergencia-texto {
    font-size: 1.3rem;
    font-weight: 800;
    letter-spacing: 1px;
    line-height: 1.2;
    text-align: center;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.botao-emergencia-sub {
    font-size: 0.7rem;
    font-weight: 400;
    opacity: 0.85;
    letter-spacing: 0.5px;
}

.btn-acompanhar {
    background: var(--cor-card);
    border: 2px solid var(--cor-borda);
    color: var(--cor-texto);
    padding: 14px 28px;
    border-radius: var(--radius);
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    box-shadow: var(--sombra);
}

.btn-acompanhar:hover,
.btn-acompanhar:active {
    background: #f8f9fa;
    border-color: var(--cor-primaria);
    transform: translateY(-1px);
}

.btn-acompanhar i {
    color: var(--cor-primaria);
    font-size: 1.1rem;
}

.badge-acompanhar {
    background: var(--cor-primaria);
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 2px 9px;
    border-radius: 12px;
    min-width: 24px;
    text-align: center;
}

/* ========================================
   TELA 2: FORMULARIO
   ======================================== */

.formulario-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    background: var(--cor-card);
    border-bottom: 2px solid #f0f0f0;
    flex-shrink: 0;
}

.btn-voltar-form {
    background: none;
    border: 2px solid var(--cor-borda);
    color: var(--cor-texto);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.btn-voltar-form:hover,
.btn-voltar-form:active {
    background: var(--cor-fundo);
    border-color: var(--cor-primaria);
    color: var(--cor-primaria);
}

.formulario-header h2 {
    font-size: 1.05rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--cor-texto);
    flex: 1;
}

.formulario-header h2 i { color: var(--cor-primaria); }

.btn-refresh-acomp {
    background: none;
    border: 2px solid var(--cor-borda);
    color: var(--cor-texto-sec);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.btn-refresh-acomp:active {
    background: var(--cor-fundo);
    color: var(--cor-primaria);
}

/* Aviso de prioridade critica */
.form-aviso-emergencial {
    background: linear-gradient(135deg, #fff3e0, #fde8ea);
    border: 2px solid var(--cor-primaria);
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--cor-primaria-dark);
    display: flex;
    align-items: center;
    gap: 10px;
    text-align: center;
    justify-content: center;
}

.form-aviso-emergencial i {
    font-size: 1.2rem;
    color: var(--cor-laranja);
    animation: pulsoIcone 1.5s ease-in-out infinite;
}

@keyframes pulsoIcone {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

/* Formulario */
.formulario {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.form-group label {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--cor-texto);
    display: flex;
    align-items: center;
    gap: 6px;
}

.form-group label i {
    color: var(--cor-primaria);
    font-size: 0.8rem;
    width: 16px;
    text-align: center;
}

.form-group label small {
    font-weight: 400;
    color: var(--cor-texto-sec);
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid var(--cor-borda);
    border-radius: 10px;
    font-size: 1rem;
    font-family: inherit;
    background: var(--cor-card);
    color: var(--cor-texto);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    -webkit-appearance: none;
    appearance: none;
}

.form-group input:focus,
.form-group textarea:focus {
    border-color: var(--cor-primaria);
    outline: none;
    box-shadow: 0 0 0 4px rgba(220, 53, 69, 0.1);
}

.form-group input::placeholder,
.form-group textarea::placeholder { color: #bbb; }

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.char-count {
    text-align: right;
    font-size: 0.7rem;
    color: var(--cor-texto-sec);
}

/* Botao enviar */
.btn-enviar {
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: var(--radius);
    background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-primaria-dark) 100%);
    color: white;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.2s ease;
    box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
    margin-top: 4px;
}

.btn-enviar:hover {
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
    transform: translateY(-1px);
}

.btn-enviar:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(220, 53, 69, 0.3);
}

.btn-enviar:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* ========================================
   TELA 3: CONFIRMACAO
   ======================================== */

#tela-confirmacao {
    justify-content: center;
    align-items: center;
    padding: 24px;
}

.confirmacao-container {
    text-align: center;
    max-width: 400px;
    width: 100%;
}

.confirmacao-icone {
    font-size: 4.5rem;
    margin-bottom: 16px;
    animation: confirmacaoEntrar 0.6s ease;
}

.confirmacao-sucesso { color: var(--cor-sucesso); }

@keyframes confirmacaoEntrar {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); opacity: 1; }
}

.confirmacao-titulo {
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--cor-texto);
    margin-bottom: 8px;
}

.confirmacao-mensagem {
    font-size: 0.9rem;
    color: var(--cor-texto-sec);
    margin-bottom: 20px;
}

.confirmacao-detalhes {
    background: var(--cor-sucesso-light);
    border: 2px solid var(--cor-sucesso);
    border-radius: var(--radius);
    padding: 14px 18px;
    margin-bottom: 24px;
    text-align: left;
    font-size: 0.85rem;
    line-height: 1.7;
}

.confirmacao-detalhes strong { color: var(--cor-texto); }

.confirmacao-acoes {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.btn-confirmacao {
    width: 100%;
    padding: 14px;
    border: 2px solid var(--cor-borda);
    border-radius: var(--radius);
    background: var(--cor-card);
    color: var(--cor-texto);
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.2s ease;
}

.btn-confirmacao:active { transform: scale(0.98); }

.btn-novo-chamado {
    background: var(--cor-primaria);
    color: white;
    border-color: var(--cor-primaria);
}

.btn-ver-chamados {
    background: var(--cor-card);
    border-color: var(--cor-primaria);
    color: var(--cor-primaria);
}

.btn-voltar-inicio {
    background: var(--cor-fundo);
    border-color: var(--cor-borda);
    color: var(--cor-texto-sec);
}

/* ========================================
   TELA 4: ACOMPANHAMENTO
   ======================================== */

.acompanhamento-lista {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.acompanhamento-lista::-webkit-scrollbar { width: 4px; }
.acompanhamento-lista::-webkit-scrollbar-thumb { background: var(--cor-borda); border-radius: 2px; }

.acomp-card {
    background: var(--cor-card);
    border-radius: var(--radius);
    border-left: 5px solid var(--cor-borda);
    box-shadow: var(--sombra);
    padding: 14px;
    transition: all 0.2s ease;
}

.acomp-card.acomp-aberto { border-left-color: var(--cor-primaria); }
.acomp-card.acomp-em_atendimento { border-left-color: var(--cor-laranja); }
.acomp-card.acomp-fechado { border-left-color: var(--cor-sucesso); }
.acomp-card.acomp-inativo { border-left-color: #adb5bd; }

.acomp-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.acomp-card-titulo {
    display: flex;
    align-items: center;
    gap: 8px;
}

.acomp-kora {
    font-weight: 700;
    font-size: 0.95rem;
    color: var(--cor-texto);
}

.acomp-badge {
    font-size: 0.6rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 12px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.acomp-badge-aberto { background: var(--cor-primaria-light); color: var(--cor-primaria); }
.acomp-badge-em_atendimento { background: #fff3e0; color: #e65100; }
.acomp-badge-fechado { background: var(--cor-sucesso-light); color: var(--cor-sucesso); }
.acomp-badge-inativo { background: #f5f5f5; color: #999; }

.acomp-tempo {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--cor-texto);
    display: flex;
    align-items: center;
    gap: 4px;
}

.acomp-tempo i { color: var(--cor-texto-sec); font-size: 0.75rem; }
.acomp-tempo.tempo-longo { color: var(--cor-primaria); }

.acomp-card-body {
    font-size: 0.82rem;
    color: var(--cor-texto-sec);
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.acomp-campo {
    display: flex;
    align-items: center;
    gap: 6px;
}

.acomp-campo i { width: 14px; text-align: center; font-size: 0.72rem; color: var(--cor-info); flex-shrink: 0; }
.acomp-campo strong { color: var(--cor-texto); }

.acomp-obs {
    padding: 8px 10px;
    background: var(--cor-sucesso-light);
    border-radius: 6px;
    font-size: 0.78rem;
    margin-top: 4px;
}

.acompanhamento-vazio {
    text-align: center;
    padding: 50px 20px;
    color: var(--cor-texto-sec);
}

.acompanhamento-vazio i { font-size: 3rem; margin-bottom: 12px; display: block; color: var(--cor-borda); }
.acompanhamento-vazio p { font-size: 0.95rem; font-weight: 600; }

/* ========================================
   LOADING / TOAST
   ======================================== */

.loading { text-align: center; padding: 40px; color: var(--cor-texto-sec); }

.loading-spinner {
    width: 36px; height: 36px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--cor-primaria);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 12px;
}

@keyframes spin { to { transform: rotate(360deg); } }
.loading p { font-size: 0.85rem; }

.toast-container {
    position: fixed; top: 56px; left: 50%; transform: translateX(-50%);
    z-index: 2000; display: flex; flex-direction: column; gap: 8px;
    width: calc(100% - 32px); max-width: 400px;
}

.toast {
    padding: 14px 18px; border-radius: var(--radius); color: white;
    font-size: 0.85rem; font-weight: 600; box-shadow: var(--sombra-forte);
    animation: toastEntrar 0.4s ease, toastSair 0.4s ease 3.6s forwards;
    display: flex; align-items: center; gap: 10px; text-align: center; justify-content: center;
}

.toast-sucesso { background: var(--cor-sucesso); }
.toast-erro { background: var(--cor-primaria); }
.toast-info { background: var(--cor-info); }

@keyframes toastEntrar { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes toastSair { from { opacity: 1; } to { opacity: 0; transform: translateY(-10px); } }

/* ========================================
   RESPONSIVIDADE
   ======================================== */

@media (min-width: 600px) {
    .botao-emergencia { width: 280px; height: 280px; }
    .botao-emergencia-conteudo i { font-size: 3.5rem; }
    .botao-emergencia-texto { font-size: 1.5rem; }
    .formulario { max-width: 500px; margin: 0 auto; padding: 24px; }
    .acompanhamento-lista { max-width: 600px; margin: 0 auto; width: 100%; }
}

@media (min-width: 900px) {
    .botao-emergencia { width: 300px; height: 300px; }
    .botao-emergencia-conteudo i { font-size: 4rem; }
    .botao-emergencia-texto { font-size: 1.6rem; }
    .botao-emergencia-sub { font-size: 0.8rem; }
    .btn-acompanhar { font-size: 1rem; padding: 16px 32px; }
}

@media (max-width: 380px) {
    .painel-header { padding: 6px 10px; }
    .painel-header h1 { font-size: 0.85rem; }
    .header-left img { max-height: 24px; }
    .botao-emergencia { width: 200px; height: 200px; }
    .botao-emergencia-conteudo i { font-size: 2.3rem; }
    .botao-emergencia-texto { font-size: 1.1rem; }
    .botao-emergencia-sub { font-size: 0.6rem; }
    .btn-acompanhar { padding: 12px 20px; font-size: 0.85rem; }
    .formulario { padding: 12px; gap: 12px; }
    .form-group input, .form-group textarea { padding: 10px 12px; font-size: 0.95rem; }
    .btn-enviar { padding: 14px; font-size: 1rem; }
    .confirmacao-icone { font-size: 3.5rem; }
    .confirmacao-titulo { font-size: 1.3rem; }
}

@media (max-height: 500px) and (orientation: landscape) {
    .painel-header { padding: 4px 12px; min-height: 36px; }
    .painel-header h1 { font-size: 0.8rem; }
    #tela-principal { flex-direction: row; padding: 10px 24px; gap: 30px; }
    .botao-emergencia { width: 160px; height: 160px; }
    .botao-emergencia-conteudo i { font-size: 1.8rem; }
    .botao-emergencia-texto { font-size: 0.95rem; }
    .botao-emergencia-sub { font-size: 0.55rem; }
    .btn-acompanhar { padding: 10px 18px; font-size: 0.8rem; }
    .formulario { gap: 10px; padding: 10px 16px; }
    .form-group input, .form-group textarea { padding: 8px 10px; font-size: 0.9rem; }
    .btn-enviar { padding: 10px; font-size: 0.95rem; }
    .confirmacao-icone { font-size: 2.5rem; margin-bottom: 8px; }
    .confirmacao-titulo { font-size: 1.1rem; }
}

@supports (padding-top: env(safe-area-inset-top)) {
    .painel-header {
        padding-top: max(6px, env(safe-area-inset-top));
        padding-left: max(10px, env(safe-area-inset-left));
        padding-right: max(10px, env(safe-area-inset-right));
    }
    .main-content { padding-bottom: env(safe-area-inset-bottom); }
    .formulario {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
    }
}

@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}